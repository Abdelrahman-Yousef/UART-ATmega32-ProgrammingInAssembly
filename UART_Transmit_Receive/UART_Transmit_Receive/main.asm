;
; UART_Transmit_Receive.asm
;
; Created: 8/31/2023 12:30:06 PM
; Author : Options
;


; Replace with your application code
.ORG 0x00
MAIN:
LDI R16,HIGH(RAMEND)
OUT SPH,R16
LDI R16,LOW(RAMEND)
OUT SPL,R16

LDI R16,0xFF
OUT DDRB,R16
LDI R16,0x00
OUT DDRA,R16

LDI R16,0x00
OUT UBRRH,R16
LDI R16,0x33
OUT UBRRL,R16
LDI R16,0x86
OUT UCSRC,R16
LDI R16,0x18
OUT UCSRB,R16

LOOP:
CALL TRANSMIT
CALL RECEIVE
RJMP LOOP


.ORG 0x100
TRANSMIT:
SBIS UCSRA,UDRE
RET
IN R16,PINA
OUT UDR,R16
RET

RECEIVE:
SBIS UCSRA,RXC
RET
IN R16,UDR
OUT PORTB,R16
RET